/* @copyright Copyright 2024 United States Government as represented by the Administrator of the
              National Aeronautics and Space Administration.  All Rights Reserved. */

#define MODELS_10HZ   0.1

##include "sims/networks/example_space_vehicle/HarveyFluid.hh"
##include "sims/networks/example_space_vehicle/models/HarveySignal.hh"

// // Needed for sim bus multithreading
// #include "../S_modules/ChildThreadHandler.sm"
// #include "thread_safe_bus/thread_map.sm"

// // Simbus sim object
// #include "thread_safe_bus/simbus_simobj.sm"

// Default system classes
#include "sim_objects/default_trick_sys.sm"

// // Health and status sim object.
// #include "../S_modules/hs.sm"

#ifdef HLA
  #include "DistIf/THLA_interface.sm"
#endif

class HarveySimObject: public Trick::SimObject
{
    public:
        HarveySignal signal;
        HarveyFluid  fluid;   /**< (--) GUNNS fluid network */
        HarveySimObject()
            :
            signal(),
            fluid("harvey.fluid")
        {
            ("initialization")      signal.initialize();
            ("initialization")      fluid.initialize();
            ("restart")             fluid.restart();

            (MODELS_10HZ, "scheduled") signal.update(MODELS_10HZ);
            (MODELS_10HZ, "scheduled") fluid.pump.setMotorSpeed(signal.pc.getMotorSpeed());
            (MODELS_10HZ, "scheduled") fluid.update(MODELS_10HZ);
        }

        virtual ~HarveySimObject() { /* nothing to do */ }

    private:
        // Copy constructor unavailable since declared private and not implemented.
        HarveySimObject(const HarveySimObject&);
        // Assignment operator unavailable since declared private and not implemented.
        HarveySimObject operator = (const HarveySimObject&);
};


HarveySimObject harvey;
